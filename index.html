<!DOCTYPE html>
<html>
  <head>
    <style>
      body {
        font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
        font-size:12px;
        display:flex;
        align-content: center;
        justify-content: center;
        flex-flow: column wrap;
        padding:0;
        margin:0;
      }
      header,main {
        width:80vw;
        max-width:900px;
        background:#ececec;
        padding:1.5em 3em;
      }
      a {
        color:#365f91;
        text-decoration:none;
      }
      main {
        border-top:1px solid #365f91;
      }
      a, h1, h2, h3, h4, h5, h6 {
        font-family:'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
      }
      h1, h2, h3, h4, h5, h6 {
        color:#333;
      }
      h1 {
        font-size:1.2rem;
        color:#365f91;
      }
      h2 {
        font-size:1.5rem;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Albert Diones - PHP/JS developer</h1>
      <p>15 years of experience on web development and more</p>
    </header>
    <main>
      <h2>Open-source repos and Packages:</h2>
      <section class="packages javascript">
        <h3>JavaScript/TypeScript</h3>
        <ul>
          <li>https://www.npmjs.com/package/add_logger</li>
          <li>https://www.npmjs.com/package/add_repeater</li>
          <li>https://github.com/albertdiones/MongoDash</li>
        </ul>
      </section>
      <section class="packages old">
        <h3>Sample Codes from previous job applications</h3>
        <ul>
          <li>https://github.com/albertdiones/nb_todos</li>
          <li>https://github.com/albertdiones/jobtests_flexisourceit</li>
        </ul>
      </section>
      <section class="packages old">
        <h3>Old Projects</h3>
        <ul>
          <li>https://github.com/albertdiones/ADD-smart-entities</li>
          <li>https://github.com/albertdiones/ADD-smart-exceptions</li>
          <li>https://github.com/albertdiones/addph-debug</li>
        </ul>
      </section>
    </main>
    <script>
      /**
       * from chatgpt (and edited)
       * help me with creating my github.io page, using javascript, show me code that will replace all non-link http:// and replace them with a href
       */
      document.addEventListener("DOMContentLoaded", function() {

        // Regular expression to match http:// URLs that are not inside <a> tags
        const urlRegex = /(https?:\/\/[^\s]+)/g;

        // Function to replace non-link URLs with clickable links
        function replaceUrlsWithLinks(element) {
              element.childNodes.forEach(child => {
                  if (child.nodeType === Node.TEXT_NODE) {
                      const newText = child.nodeValue.replace(urlRegex, '<a href="$1">$1</a>');
                      const newFragment = document.createDocumentFragment();

                      // Create a temporary div to parse the new HTML string
                      const tempDiv = document.createElement("div");
                      tempDiv.innerHTML = newText;

                      // Append the parsed HTML to the new fragment
                      Array.from(tempDiv.childNodes).forEach(node => newFragment.appendChild(node));
                      
                      // Replace the original text node with the new fragment
                      element.replaceChild(newFragment, child);
                  } else if (child.nodeType === Node.ELEMENT_NODE) {
                      // Recursively process child elements
                      replaceUrlsWithLinks(child);
                  }
              });
          }

          // Replace URLs with links in the content div
          replaceUrlsWithLinks(document.querySelector("body"));
      });

    </script>
  </body>
</html>
